<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Samos Mail - Professional Webmail Client</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #1a73e8;
            --secondary-color: #0b57d0;
            --accent-color: #e8f0fe;
            --text-color: #202124;
            --text-light: #5f6368;
            --border-color: #dadce0;
            --background-light: #f8f9fa;
            --hover-color: #f1f3f4;
            --white: #ffffff;
            --sent-color: #e3f2fd;
            --draft-color: #fff8e1;
            --trash-color: #fce8e6;
            --sidebar-width: 256px; /* Slightly wider for better usability, inspired by Gmail */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Roboto', Arial, sans-serif; /* Use Roboto for a modern look, like Gmail */
        }

        body {
            color: var(--text-color);
            background-color: var(--background-light);
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        /* Header Styles */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            background-color: var(--white);
            border-bottom: 1px solid var(--border-color);
            height: 64px;
            position: relative;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
            color: var(--primary-color);
            font-size: 20px;
        }

        .logo i {
            font-size: 24px;
        }

        .search-bar {
            display: flex;
            align-items: center;
            background: var(--accent-color);
            border-radius: 8px;
            padding: 8px 16px;
            flex: 1;
            max-width: 720px;
            margin: 0 16px;
            border: 1px solid transparent;
            transition: box-shadow 0.2s;
        }

        .search-bar:focus-within {
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            background: var(--white);
        }

        .search-bar input {
            border: none;
            background: transparent;
            width: 100%;
            outline: none;
            font-size: 14px;
        }

        .user-actions {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .user-actions button {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-light);
            font-size: 20px;
            padding: 8px;
            border-radius: 50%;
            transition: background-color 0.2s;
        }

        .user-actions button:hover {
            background-color: var(--hover-color);
        }

        .user-profile {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            position: relative;
        }

        .user-profile-menu {
            position: absolute;
            top: 48px;
            right: 0;
            background: var(--white);
            border-radius: 4px;
            box-shadow: 0 1px 8px rgba(0, 0, 0, 0.15);
            width: 300px;
            z-index: 1000;
            display: none;
            overflow: hidden;
        }

        .user-profile-menu.active {
            display: block;
        }

        .profile-menu-header {
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            border-bottom: 1px solid var(--border-color);
            background: var(--accent-color);
        }

        .profile-menu-body .profile-menu-item {
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .profile-menu-body .profile-menu-item:hover {
            background-color: var(--hover-color);
        }

        /* Main Layout */
        .main-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* Sidebar Styles */
        .sidebar {
            width: var(--sidebar-width);
            background-color: var(--white);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .compose-btn {
            margin: 16px;
            padding: 12px 24px;
            border-radius: 24px;
            background-color: var(--white);
            color: var(--text-color);
            border: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: box-shadow 0.2s, background-color 0.2s;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }

        .compose-btn:hover {
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            background-color: var(--hover-color);
        }

        .folder-list {
            list-style: none;
        }

        .folder-item {
            display: flex;
            align-items: center;
            padding: 8px 16px 8px 24px;
            gap: 16px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .folder-item.active {
            background-color: var(--accent-color);
            font-weight: 500;
        }

        .folder-item:hover {
            background-color: var(--hover-color);
        }

        .folder-item i {
            font-size: 16px;
            width: 24px;
            color: var(--text-light);
        }

        .folder-count {
            margin-left: auto;
            font-size: 12px;
            color: var(--text-light);
            background-color: var(--accent-color);
            padding: 2px 8px;
            border-radius: 12px;
        }

        .sidebar-footer {
            margin-top: auto;
            padding: 16px;
            border-top: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        /* Email Content Styles */
        .email-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .email-toolbar {
            padding: 8px 16px;
            display: flex;
            align-items: center;
            gap: 8px;
            border-bottom: 1px solid var(--border-color);
            background: var(--white);
        }

        .toolbar-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px;
            border-radius: 4px;
            color: var(--text-light);
            transition: background-color 0.2s;
        }

        .toolbar-btn:hover {
            background-color: var(--hover-color);
        }

        .email-list {
            flex: 1;
            overflow-y: auto;
            background: var(--white);
        }

        .email-item {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .email-item:hover {
            background-color: var(--hover-color);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .email-item.unread {
            font-weight: 500;
            background-color: var(--white);
        }

        .email-checkbox {
            margin-right: 16px;
        }

        .email-star {
            margin-right: 16px;
            color: var(--text-light);
        }

        .email-star.starred {
            color: #fbbc04; /* Gmail-like yellow */
        }

        .email-sender {
            width: 160px;
            font-weight: 500;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .email-content-preview {
            flex: 1;
            display: flex;
            gap: 4px;
            overflow: hidden;
        }

        .email-subject {
            font-weight: 500;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .email-body-preview {
            color: var(--text-light);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .email-date {
            width: 120px;
            text-align: right;
            color: var(--text-light);
            font-size: 12px;
        }

        /* Email View Styles */
        .email-view {
            display: none;
            flex-direction: column;
            padding: 24px;
            overflow-y: auto;
            background: var(--white);
        }

        .email-view-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .email-view-subject {
            font-size: 20px;
            font-weight: 500;
        }

        .email-view-info {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
        }

        .sender-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: 500;
        }

        .sender-name {
            font-weight: 500;
        }

        .sender-email {
            color: var(--text-light);
            font-size: 12px;
        }

        .email-view-body {
            line-height: 1.5;
            font-size: 14px;
        }

        .email-view-attachments {
            margin-top: 24px;
            padding-top: 16px;
            border-top: 1px solid var(--border-color);
        }

        .attachment-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            margin-bottom: 8px;
            max-width: 300px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .attachment-item:hover {
            background-color: var(--hover-color);
        }

        /* Compose Modal */
        .compose-modal {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 560px;
            height: 560px;
            background: var(--white);
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            flex-direction: column;
        }

        .compose-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            background: var(--accent-color);
            border-bottom: 1px solid var(--border-color);
            font-weight: 500;
            font-size: 14px;
        }

        .compose-actions button {
            background: none;
            border: none;
            color: var(--text-light);
            cursor: pointer;
            padding: 4px;
        }

        .compose-body {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 12px;
        }

        .compose-field {
            display: flex;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .compose-field-label {
            width: 64px;
            color: var(--text-light);
            font-size: 14px;
        }

        .compose-field-input {
            flex: 1;
            border: none;
            outline: none;
            font-size: 14px;
        }

        .compose-content {
            flex: 1;
            border: none;
            outline: none;
            padding: 12px 0;
            resize: none;
            font-size: 14px;
            line-height: 1.5;
        }

        .compose-footer {
            display: flex;
            align-items: center;
            padding: 12px;
            border-top: 1px solid var(--border-color);
            gap: 8px;
        }

        .compose-send-btn {
            background: var(--primary-color);
            color: var(--white);
            border: none;
            padding: 8px 24px;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .compose-send-btn:hover {
            background: var(--secondary-color);
        }

        /* Settings Modal (Simplified for brevity) */
        .settings-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 600px;
            background: var(--white);
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            z-index: 1001;
            flex-direction: column;
            max-height: 80vh;
            overflow: hidden;
        }

        .settings-header {
            padding: 16px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            font-weight: 500;
        }

        .settings-content {
            padding: 16px;
            overflow-y: auto;
        }

        /* Overlay */
        .overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.3);
            z-index: 999;
        }

        /* Responsive Design */
        @media (max-width: 1024px) { /* Tablet */
            .sidebar {
                width: 72px;
            }

            .folder-item span {
                display: none;
            }

            .folder-count {
                display: none;
            }

            .compose-btn span {
                display: none;
            }

            .compose-btn {
                justify-content: center;
                padding: 12px;
                margin: 16px 8px;
            }

            .sidebar-footer .user-details {
                display: none;
            }

            .email-sender {
                width: 120px;
            }

            .search-bar {
                margin: 0 8px;
            }
        }

        @media (max-width: 600px) { /* Mobile */
            header {
                padding: 8px;
            }

            .search-bar {
                order: 3;
                width: calc(100% - 16px);
                margin: 8px auto 0;
                position: absolute;
                left: 8px;
                bottom: -48px;
                display: none; /* Hide search on mobile, show on focus or button */
            }

            .logo {
                font-size: 18px;
            }

            .main-container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                flex-direction: row;
                height: auto;
                overflow-x: auto;
                border-right: none;
                border-bottom: 1px solid var(--border-color);
            }

            .folder-list {
                display: flex;
            }

            .folder-item {
                flex-direction: column;
                padding: 8px;
                gap: 4px;
            }

            .compose-btn {
                order: -1;
                margin: 8px;
            }

            .sidebar-footer {
                display: none;
            }

            .compose-modal {
                width: 100%;
                height: 100vh;
                bottom: 0;
                right: 0;
                border-radius: 0;
            }

            .email-view {
                position: absolute;
                inset: 0;
                z-index: 10;
            }

            .email-list {
                height: calc(100vh - 64px - 56px); /* Adjust for header and sidebar */
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <i class="fas fa-envelope"></i>
            <span>Samos Mail</span>
        </div>
        
        <div class="search-bar">
            <i class="fas fa-search"></i>
            <input type="text" placeholder="Search mail">
        </div>
        
        <div class="user-actions">
            <button id="settings-btn"><i class="fas fa-cog"></i></button>
            <button><i class="fas fa-bell"></i></button>
            <div class="user-profile" id="profile-btn">JS
                <div class="user-profile-menu" id="profile-menu">
                    <div class="profile-menu-header">
                        <div class="user-profile">JS</div>
                        <div>
                            <div>John Smith</div>
                            <div>john@samos.com</div>
                        </div>
                    </div>
                    <div class="profile-menu-body">
                        <div class="profile-menu-item"><i class="fas fa-user"></i> Manage account</div>
                        <div class="profile-menu-item"><i class="fas fa-plus"></i> Add account</div>
                        <div class="profile-menu-item"><i class="fas fa-sign-out-alt"></i> Sign out</div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <div class="main-container">
        <aside class="sidebar">
            <button class="compose-btn" id="compose-btn">
                <i class="fas fa-pen"></i>
                <span>Compose</span>
            </button>
            
            <ul class="folder-list">
                <li class="folder-item active" data-folder="inbox"><i class="fas fa-inbox"></i><span>Inbox</span><span class="folder-count">0</span></li>
                <li class="folder-item" data-folder="starred"><i class="fas fa-star"></i><span>Starred</span><span class="folder-count">0</span></li>
                <li class="folder-item" data-folder="sent"><i class="fas fa-paper-plane"></i><span>Sent</span><span class="folder-count">0</span></li>
                <li class="folder-item" data-folder="drafts"><i class="fas fa-file-alt"></i><span>Drafts</span><span class="folder-count">0</span></li>
                <li class="folder-item" data-folder="trash"><i class="fas fa-trash"></i><span>Trash</span><span class="folder-count">0</span></li>
                <li class="folder-item" data-folder="spam"><i class="fas fa-exclamation-circle"></i><span>Spam</span><span class="folder-count">0</span></li>
            </ul>
            
            <div class="sidebar-footer">
                <div class="user-profile">JS</div>
                <div class="user-details">
                    <div>John Smith</div>
                    <div>john@samos.com</div>
                </div>
            </div>
        </aside>
        
        <main class="email-content">
            <div class="email-toolbar">
                <button class="toolbar-btn"><i class="fas fa-sync-alt"></i></button>
                <button class="toolbar-btn"><i class="fas fa-trash"></i></button>
                <button class="toolbar-btn"><i class="fas fa-archive"></i></button>
                <button class="toolbar-btn"><i class="fas fa-ellipsis-v"></i></button>
            </div>
            
            <div class="email-list" id="email-list"></div>
            
            <div class="email-view" id="email-view">
                <div class="email-view-header">
                    <h2 class="email-view-subject"></h2>
                    <div class="email-view-date"></div>
                </div>
                <div class="email-view-info">
                    <div class="sender-avatar"></div>
                    <div>
                        <div class="sender-name"></div>
                        <div class="sender-email"></div>
                    </div>
                </div>
                <div class="email-view-body"></div>
                <div class="email-view-attachments"></div>
            </div>
        </main>
    </div>
    
    <div class="compose-modal" id="compose-modal">
        <div class="compose-header">
            <span>New Message</span>
            <div class="compose-actions">
                <button><i class="fas fa-minus"></i></button>
                <button><i class="fas fa-expand"></i></button>
                <button class="close-compose"><i class="fas fa-times"></i></button>
            </div>
        </div>
        <div class="compose-body">
            <div class="compose-field">
                <span class="compose-field-label">To</span>
                <input type="text" class="compose-field-input" id="compose-to">
            </div>
            <div class="compose-field">
                <span class="compose-field-label">Subject</span>
                <input type="text" class="compose-field-input" id="compose-subject">
            </div>
            <textarea class="compose-content" id="compose-body"></textarea>
        </div>
        <div class="compose-footer">
            <button class="compose-send-btn" id="send-btn">Send</button>
            <button class="toolbar-btn"><i class="fas fa-paperclip"></i></button>
            <button class="toolbar-btn"><i class="fas fa-image"></i></button>
        </div>
    </div>

    <div class="settings-modal" id="settings-modal">
        <div class="settings-header">
            <span>Settings</span>
            <button class="close-settings"><i class="fas fa-times"></i></button>
        </div>
        <div class="settings-content">
            <!-- Settings content can be expanded as needed -->
            <p>General settings, themes, etc.</p>
        </div>
    </div>

    <div class="overlay" id="overlay"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elements
            const composeBtn = document.getElementById('compose-btn');
            const composeModal = document.getElementById('compose-modal');
            const sendBtn = document.getElementById('send-btn');
            const composeTo = document.getElementById('compose-to');
            const composeSubject = document.getElementById('compose-subject');
            const composeBody = document.getElementById('compose-body');
            const settingsBtn = document.getElementById('settings-btn');
            const settingsModal = document.getElementById('settings-modal');
            const profileBtn = document.getElementById('profile-btn');
            const profileMenu = document.getElementById('profile-menu');
            const overlay = document.getElementById('overlay');
            const closeCompose = document.querySelector('.close-compose');
            const closeSettings = document.querySelector('.close-settings');
            const emailList = document.getElementById('email-list');
            const emailView = document.getElementById('email-view');
            const folderItems = document.querySelectorAll('.folder-item');
            const settingsTabs = document.querySelectorAll('.settings-tab');

            // Data structure for emails (in-memory mockup)
            let emails = {
                inbox: [
                    {
                        id: 1,
                        sender: 'Samos Admin',
                        senderEmail: 'admin@samos.com',
                        avatar: 'SA',
                        subject: 'Welcome to Samos Mail',
                        preview: 'We\'re excited to have you onboard with our new email service...',
                        body: `
                            <p>Dear John Smith,</p>
                            <p>Welcome to Samos Mail! We're thrilled to have you as part of our email service community.</p>
                            <p>With your new @samos.com email address, you can enjoy:</p>
                            <ul>
                                <li>Secure and private email communication</li>
                                <li>Generous storage space for all your messages</li>
                                <li>Seamless integration with other Samos Global services</li>
                                <li>Advanced spam filtering and security features</li>
                            </ul>
                            <p>If you have any questions or need assistance, please don't hesitate to contact our support team at support@samos.com.</p>
                            <p>Best regards,<br>The Samos Mail Team</p>
                        `,
                        date: 'June 20, 2023, 9:42 AM',
                        attachments: [
                            { icon: 'file-pdf', name: 'Welcome_Guide.pdf', size: '2.4 MB' },
                            { icon: 'file-image', name: 'Samos_Mail_Overview.png', size: '1.1 MB' }
                        ],
                        unread: true,
                        starred: true
                    },
                    {
                        id: 2,
                        sender: 'Tech Support',
                        senderEmail: 'support@samos.com',
                        avatar: 'TS',
                        subject: 'System Update Notification',
                        preview: 'We\'ll be performing maintenance on our servers this weekend...',
                        body: `
                            <p>Hello John,</p>
                            <p>We'll be performing scheduled maintenance on our servers this weekend.</p>
                            <p>During this time, you may experience brief downtime. We apologize for any inconvenience.</p>
                            <p>Thank you for your understanding.</p>
                            <p>Best,<br>Tech Support Team</p>
                        `,
                        date: 'Yesterday',
                        attachments: [],
                        unread: true,
                        starred: false
                    },
                    {
                        id: 3,
                        sender: 'Marketing Team',
                        senderEmail: 'marketing@samos.com',
                        avatar: 'MT',
                        subject: 'New Product Launch',
                        preview: 'We\'re excited to announce our latest product that will revolutionize...',
                        body: `
                            <p>Hi John,</p>
                            <p>We're excited to announce our latest product launch!</p>
                            <p>This new feature will revolutionize how you manage your emails.</p>
                            <p>Stay tuned for more details.</p>
                            <p>Regards,<br>Marketing Team</p>
                        `,
                        date: 'Jun 15',
                        attachments: [],
                        unread: false,
                        starred: false
                    },
                    {
                        id: 4,
                        sender: 'Sarah Johnson',
                        senderEmail: 'sarah.johnson@example.com',
                        avatar: 'SJ',
                        subject: 'Project Timeline Update',
                        preview: 'I\'ve updated the project timeline based on our last meeting...',
                        body: `
                            <p>Dear John,</p>
                            <p>I've updated the project timeline based on our last meeting.</p>
                            <p>Please review and let me know if there are any changes needed.</p>
                            <p>Thanks,<br>Sarah</p>
                        `,
                        date: 'Jun 12',
                        attachments: [],
                        unread: false,
                        starred: true
                    },
                    {
                        id: 5,
                        sender: 'David Wilson',
                        senderEmail: 'david.wilson@example.com',
                        avatar: 'DW',
                        subject: 'Meeting Notes',
                        preview: 'Here are the notes from yesterday\'s client meeting. Please review...',
                        body: `
                            <p>Hi John,</p>
                            <p>Attached are the notes from yesterday's client meeting.</p>
                            <p>Please review and provide feedback.</p>
                            <p>Best,<br>David</p>
                        `,
                        date: 'Jun 10',
                        attachments: [],
                        unread: false,
                        starred: false
                    }
                ],
                sent: [],
                drafts: [],
                trash: [],
                spam: []
            };

            let currentFolder = 'inbox';
            let currentEmail = null;

            // Function to render email list for a folder
            function renderEmailList(folder) {
                emailList.innerHTML = '';
                let folderEmails = folder === 'starred' ? getStarredEmails() : emails[folder];
                folderEmails.forEach(email => {
                    const emailItem = document.createElement('div');
                    emailItem.classList.add('email-item');
                    if (email.unread) emailItem.classList.add('unread');
                    emailItem.dataset.emailId = email.id;
                    emailItem.innerHTML = `
                        <input type="checkbox" class="email-checkbox">
                        <i class="${email.starred ? 'fas fa-star email-star starred' : 'far fa-star email-star'}"></i>
                        <div class="email-sender">${email.sender}</div>
                        <div class="email-content-preview">
                            <div class="email-subject">${email.subject} - </div>
                            <div class="email-body-preview">${email.preview}</div>
                        </div>
                        <div class="email-date">${email.date}</div>
                        <div class="email-actions">
                            <i class="fas fa-trash delete-email"></i>
                        </div>
                    `;
                    emailList.appendChild(emailItem);
                });
                attachEmailItemListeners();
            }

            // Function to get all starred emails across folders
            function getStarredEmails() {
                let starred = [];
                Object.values(emails).forEach(folderEmails => {
                    starred = starred.concat(folderEmails.filter(email => email.starred));
                });
                return starred;
            }

            // Function to render email view
            function renderEmailView(email) {
                document.querySelector('.email-view-subject').textContent = email.subject;
                document.querySelector('.email-view-date').textContent = email.date;
                document.querySelector('.sender-avatar').textContent = email.avatar;
                document.querySelector('.sender-name').textContent = email.sender;
                document.querySelector('.sender-email').textContent = email.senderEmail;
                document.querySelector('.email-view-body').innerHTML = email.body;

                const attachmentsContainer = document.querySelector('.email-view-attachments');
                attachmentsContainer.innerHTML = '';
                if (email.attachments.length > 0) {
                    attachmentsContainer.innerHTML = '<h3>Attachments (' + email.attachments.length + ')</h3>';
                    email.attachments.forEach(attachment => {
                        const attachmentItem = document.createElement('div');
                        attachmentItem.classList.add('attachment-item');
                        attachmentItem.innerHTML = `
                            <i class="fas fa-${attachment.icon} attachment-icon"></i>
                            <div class="attachment-details">
                                <div class="attachment-name">${attachment.name}</div>
                                <div class="attachment-size">${attachment.size}</div>
                            </div>
                        `;
                        attachmentsContainer.appendChild(attachmentItem);
                    });
                }

                emailView.style.display = 'flex';
                if (window.innerWidth <= 600) {
                    emailList.style.display = 'none';
                }
                if (email.unread) {
                    email.unread = false;
                    renderEmailList(currentFolder);
                    updateFolderCounts();
                }
            }

            // Function to update folder counts
            function updateFolderCounts() {
                document.querySelector('[data-folder="inbox"] .folder-count').textContent = emails.inbox.length;
                document.querySelector('[data-folder="sent"] .folder-count').textContent = emails.sent.length;
                document.querySelector('[data-folder="drafts"] .folder-count').textContent = emails.drafts.length;
                document.querySelector('[data-folder="trash"] .folder-count').textContent = emails.trash.length;
                document.querySelector('[data-folder="starred"] .folder-count').textContent = getStarredEmails().length;
                document.querySelector('[data-folder="spam"] .folder-count').textContent = emails.spam.length;
            }

            // Attach listeners to email items (star, delete, click)
            function attachEmailItemListeners() {
                const emailItems = document.querySelectorAll('.email-item');
                emailItems.forEach(item => {
                    item.addEventListener('click', (e) => {
                        if (e.target.classList.contains('email-star') || e.target.classList.contains('delete-email')) return;
                        const emailId = parseInt(item.dataset.emailId);
                        const folderEmails = currentFolder === 'starred' ? getStarredEmails() : emails[currentFolder];
                        currentEmail = folderEmails.find(email => email.id === emailId);
                        renderEmailView(currentEmail);
                    });
                });

                const starIcons = document.querySelectorAll('.email-star');
                starIcons.forEach(star => {
                    star.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const item = e.target.closest('.email-item');
                        const emailId = parseInt(item.dataset.emailId);
                        let email;
                        Object.values(emails).forEach(folder => {
                            const found = folder.find(em => em.id === emailId);
                            if (found) email = found;
                        });
                        if (email) {
                            email.starred = !email.starred;
                            renderEmailList(currentFolder);
                            updateFolderCounts();
                        }
                    });
                });

                const deleteIcons = document.querySelectorAll('.delete-email');
                deleteIcons.forEach(icon => {
                    icon.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const item = e.target.closest('.email-item');
                        const emailId = parseInt(item.dataset.emailId);
                        let sourceFolder;
                        Object.keys(emails).forEach(folder => {
                            const index = emails[folder].findIndex(em => em.id === emailId);
                            if (index !== -1) {
                                sourceFolder = folder;
                                const [deletedEmail] = emails[folder].splice(index, 1);
                                if (sourceFolder !== 'trash') {
                                    emails.trash.push(deletedEmail);
                                }
                            }
                        });
                        renderEmailList(currentFolder);
                        updateFolderCounts();
                        if (currentEmail && currentEmail.id === emailId) {
                            emailView.style.display = 'none';
                        }
                    });
                });
            }

            // Open Compose Modal
            composeBtn.addEventListener('click', () => {
                composeModal.style.display = 'flex';
                overlay.style.display = 'block';
            });

            // Send Email (mock: add to sent)
            sendBtn.addEventListener('click', () => {
                const newEmail = {
                    id: Date.now(),
                    sender: 'John Smith',
                    senderEmail: 'john@samos.com',
                    avatar: 'JS',
                    subject: composeSubject.value || 'No Subject',
                    preview: composeBody.value.substring(0, 50) + '...',
                    body: composeBody.value.replace(/\n/g, '<br>'),
                    date: new Date().toLocaleString(),
                    attachments: [],
                    unread: false,
                    starred: false
                };
                emails.sent.push(newEmail);
                updateFolderCounts();
                composeModal.style.display = 'none';
                overlay.style.display = 'none';
                composeTo.value = '';
                composeSubject.value = '';
                composeBody.value = '';
                if (currentFolder === 'sent') {
                    renderEmailList('sent');
                }
            });

            // Open Settings Modal
            settingsBtn.addEventListener('click', () => {
                settingsModal.style.display = 'flex';
                overlay.style.display = 'block';
            });

            // Toggle Profile Menu
            profileBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                profileMenu.classList.toggle('active');
            });

            // Close modals when clicking on overlay
            overlay.addEventListener('click', () => {
                composeModal.style.display = 'none';
                settingsModal.style.display = 'none';
                overlay.style.display = 'none';
                profileMenu.classList.remove('active');
            });

            // Close modals with close buttons
            closeCompose.addEventListener('click', () => {
                composeModal.style.display = 'none';
                overlay.style.display = 'none';
            });

            closeSettings.addEventListener('click', () => {
                settingsModal.style.display = 'none';
                overlay.style.display = 'none';
            });

            // Switch folders
            folderItems.forEach(item => {
                item.addEventListener('click', () => {
                    folderItems.forEach(folder => folder.classList.remove('active'));
                    item.classList.add('active');
                    currentFolder = item.dataset.folder;
                    renderEmailList(currentFolder);
                    emailView.style.display = 'none';
                    emailList.style.display = 'block';
                });
            });

            // Settings tabs functionality
            settingsTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    settingsTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    // Note: Content switching can be added here if more tabs are implemented
                });
            });

            // Close profile menu when clicking elsewhere
            document.addEventListener('click', (e) => {
                if (!profileBtn.contains(e.target) && !profileMenu.contains(e.target)) {
                    profileMenu.classList.remove('active');
                }
            });

            // Initial render
            renderEmailList('inbox');
            updateFolderCounts();
        });
    </script>
</body>
</html>
